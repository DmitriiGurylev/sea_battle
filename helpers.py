from telebot import types

from bot_init import players
from player_profile import PlayerProfile


def get_user_by_id(p_id: int) -> PlayerProfile:
    for p in players:
        if p.player_id == p_id:
            return p
    return None


cells_set: set[str] = {
    '–∞1', '–∞2', '–∞3', '–∞4', '–∞5', '–∞6', '–∞7', '–∞8', '–∞9', '–∞10',
    '–±1', '–±2', '–±3', '–±4', '–±5', '–±6', '–±7', '–±8', '–±9', '–±10',
    '–≤1', '–≤2', '–≤3', '–≤4', '–≤5', '–≤6', '–≤7', '–≤8', '–≤9', '–≤10',
    '–≥1', '–≥2', '–≥3', '–≥4', '–≥5', '–≥6', '–≥7', '–≥8', '–≥9', '–≥10',
    '–¥1', '–¥2', '–¥3', '–¥4', '–¥5', '–¥6', '–¥7', '–¥8', '–¥9', '–¥10',
    '–µ1', '–µ2', '–µ3', '–µ4', '–µ5', '–µ6', '–µ7', '–µ8', '–µ9', '–µ10',
    '–∂1', '–∂2', '–∂3', '–∂4', '–∂5', '–∂6', '–∂7', '–∂8', '–∂9', '–∂10',
    '–∑1', '–∑2', '–∑3', '–∑4', '–∑5', '–∑6', '–∑7', '–∑8', '–∑9', '–∑10',
    '–∏1', '–∏2', '–∏3', '–∏4', '–∏5', '–∏6', '–∏7', '–∏8', '–∏9', '–∏10',
    '–∫1', '–∫2', '–∫3', '–∫4', '–∫5', '–∫6', '–∫7', '–∫8', '–∫9', '–∫10'}


def get_field(f: list[str]) -> str:
    return '. 1Ô∏è‚É£2Ô∏è‚É£3Ô∏è‚É£4Ô∏è‚É£5Ô∏è‚É£6Ô∏è‚É£7Ô∏è‚É£8Ô∏è‚É£9Ô∏è‚É£üîü\n' \
           'A {0}{1}{2}{3}{4}{5}{6}{7}{8}{9}\n' \
           '–ë {10}{11}{12}{13}{14}{15}{16}{17}{18}{19}\n' \
           '–í {20}{21}{22}{23}{24}{25}{26}{27}{28}{29}\n' \
           '–ì {30}{31}{32}{33}{34}{35}{36}{37}{38}{39}\n' \
           '–î {40}{41}{42}{43}{44}{45}{46}{47}{48}{49}\n' \
           '–ï {50}{51}{52}{53}{54}{55}{56}{57}{58}{59}\n' \
           '–ñ {60}{61}{62}{63}{64}{65}{66}{67}{68}{69}\n' \
           '–ó {70}{71}{72}{73}{74}{75}{76}{77}{78}{79}\n' \
           '–ò {80}{81}{82}{83}{84}{85}{86}{87}{88}{89}\n' \
           '–ö {90}{91}{92}{93}{94}{95}{96}{97}{98}{99}\n' \
        .format(
        f[1], f[2], f[3], f[4], f[5], f[6], f[7], f[8], f[9], f[10],
        f[11], f[12], f[13], f[14], f[15], f[16], f[17], f[18], f[19], f[20],
        f[21], f[22], f[23], f[24], f[25], f[26], f[27], f[28], f[29], f[30],
        f[31], f[32], f[33], f[34], f[35], f[36], f[37], f[38], f[39], f[40],
        f[41], f[42], f[43], f[44], f[45], f[46], f[47], f[48], f[49], f[50],
        f[51], f[52], f[53], f[54], f[55], f[56], f[57], f[58], f[59], f[60],
        f[61], f[62], f[63], f[64], f[65], f[66], f[67], f[68], f[69], f[70],
        f[71], f[72], f[73], f[74], f[75], f[76], f[77], f[78], f[79], f[80],
        f[81], f[82], f[83], f[84], f[85], f[86], f[87], f[88], f[89], f[90],
        f[91], f[92], f[93], f[94], f[95], f[96], f[97], f[98], f[99], f[100]
    )


def get_monospace_text(text: str) -> str:
    return '<code>{0}</code>'.format(text)


def check_turn(pl: PlayerProfile) -> bool:
    if pl.turn:
        return True
    return False


def get_stage_1_text(pl: PlayerProfile):
    return get_monospace_text(get_field(pl.field)) + \
        '\n–ü–æ—Å—Ç–∞–≤—å—Ç–µ –∫–æ—Ä–∞–±–ª–∏ –Ω–∞ —Å–≤–æ–µ –ø–æ–ª–µ. –í–≤–æ–¥ –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:\n\n' \
        '–≤–≤–æ–¥\n' \
        '1: –∞1 –±3 –≤5 –≥7\n' \
        '2: –¥1–¥2 –≥1–≥2 a1–±1\n' \
        '3: –∂1–∂2–∂3 –µ1–µ2–µ3\n' \
        '4: –∞1–∞2–∞3–∞4'


def get_stage_2_first_player_text(pl: PlayerProfile):
    return '–ò–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è.\n–í—ã —Ö–æ–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–º.\n–í–∞—à–µ –ø–æ–ª–µ:\n' + \
        get_monospace_text(get_field(pl.field)) + \
        '\n–ü–æ–ª–µ –≤—Ä–∞–≥–∞:\n' + \
        get_monospace_text(get_field(pl.enemy.field_to_enemy)) + \
        '–í—ã–±–µ—Ä–∏—Ç–µ —è—á–µ–π–∫—É –¥–ª—è –∞—Ç–∞–∫–∏'


def get_stage_2_second_player_text(pl: PlayerProfile):
    return '–ò–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è.\n–û–∂–∏–¥–∞–π—Ç–µ —Ö–æ–¥–∞ –ø–µ—Ä–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞.\n–í–∞—à–µ –ø–æ–ª–µ:\n' + \
        get_monospace_text(get_field(pl.field)) + \
        '\n–ü–æ–ª–µ –≤—Ä–∞–≥–∞:\n' + get_monospace_text(get_field(pl.enemy.field_to_enemy))
